<?xml version="1.0" encoding="utf-8"?>
<widget id="com.mendix.widget.custom.mxtreetable.MxTreeTable" needsEntityContext="true" offlineCapable="true"
    xmlns="http://www.mendix.com/widget/1.0/"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mendix.com/widget/1.0/ ../node_modules/mendix/custom_widget.xsd">
    <name>TreeTable</name>
    <description>Mendix TreeTable</description>
    <icon>iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAC9UlEQVR4nO2byWsUQRSHv2QSxA0VDUZREY3HXFwQBBUP4hKCS9CDAfHgEgUvLiC4HUT8A9STJxX0JIgXQYnexH2BgCtCRFwwiNEkalxGivk1Nl09YxIzk6T7fdB01auqqbw31TXv9atgGIZhGOklE6N5DXAY2A5MBh4BP7xeCWU9kI1crcCUNCjfIMV/ASuAYVoJTtbs9U4IZSE1rgBLgUbgXEh+CagHZgEvYtSuBo4BY4Eur7W4VAAjgKPAzb7MVBEqT9D9daTPExlgjDc6h9snNnnS0nK5rwYIr4AjwAHgIrBGsmrtAb+BccA37xNyOOONBn56LcWlHOgG3vbHLFVa7u6ZfwqcB76ovsXrnVCcRU+EfgU6gQ1pUT7MSGBSZI8wDMMw0sg84ALwADipX4fUsDkmOvwKzEmDAaZLYecNzpZso2QtXu8hSiFHZ53u7sXIfZXPAAu1MtwquOeNyj0iZxUfdHitxSWjeXfLrf8nhQwwSvfPEXmb7sO9ETmcF7kIqPRaSsfUns5U5kn+Mhe4o80veATcO4Fn+marCkSHFTJA1mspLmWKXL/31yzHpcQn4GFoI2z0eiaYHTJAVt/+sjQpH1A+wM+0YRiGMVhYDtwG2oGrcphSw66QM9QVKtenwQAzpewHYJpkCyRrG6p+QqFgKEqd6nuBVyrfUF5uv6LEa94omAhcV4DS7rUWl4yyW1uBU3Ez9cYAQeAUDXCykfa4cZWhq9QGIM85iF5TI2Xfh84LzJfso9LpiWdPaOPrCJVXpUH5gJXAXb0qa9ZLU8MwDCPtpPYwhTtC80b+wEtgtdcjwRwK5QtbdMjS1XcOFZXz+e89wbnGzxUY1SqD5NJij3WmsFpucxyZAU6cdHstfaBJCmyLDN0neUOejxyv8DmadS7ldTD4Y/5n4woSn9EcYVDv9EbkcNa/BcyIyTsWm3KF5639MU9wctRZdLFkdaq/S0siZW2eZbvE65lganWs1v1jxWllkA3DMAzDGOQAfwBZxLuLwQrMtQAAAABJRU5ErkJggg==</icon>
    <properties>

        <!-- ****************
                DATA
        *********************-->
        <propertyGroup caption="Data">
            <property key="nodeEntity" type="entity" required="true" allowNonPersistableEntities="true">
                <caption>Node Entity</caption>
                <description>Entity for the Node that is displayed in the widget.</description>
            </property>
            <property key="dataSource" type="enumeration" defaultValue="xpath">
                <caption>Data Source</caption>
                <description>Choose how you retrieve the top-level data</description>
                <enumerationValues>
                    <enumerationValue key="xpath">XPath</enumerationValue>
                    <enumerationValue key="mf">Microflow</enumerationValue>
                    <enumerationValue key="nf">Nanoflow</enumerationValue>
                </enumerationValues>
            </property>
            <property key="constraint" required="false" type="entityConstraint" entityProperty="nodeEntity">
                <caption>Node constraint</caption>
                <description>The xpath constraint on the entity.</description>
            </property>
            <property key="getDataMf" type="microflow" required="false">
                <caption>Microflow</caption>
                <description>Choose 'Microflow' in Data Source and choose a microflow here</description>
                <returnType type="Object" isList="true" entityProperty="nodeEntity" />
            </property>
            <property key="getDataNf" type="nanoflow" required="false">
                <caption>Nanoflow</caption>
                <description>Choose 'Nanoflow' in Data Source and choose a nanoflow here.
NOTE: Non-persistent entities are discouraged as they have unpredictable behavior combined with Nanoflows.
                </description>
                <returnType type="Object" isList="true" entityProperty="nodeEntity" />
            </property>
        </propertyGroup>

        <!-- ****************
                CHILDREN
        *********************-->

        <propertyGroup caption="Data Children">
            <property key="childMethod" type="enumeration" defaultValue="disabled">
                <caption>Child Method</caption>
                <description>Method how to get the child elements</description>
                <enumerationValues>
                    <enumerationValue key="disabled">Disabled</enumerationValue>
                    <enumerationValue key="reference">Reference</enumerationValue>
                    <enumerationValue key="microflow">Microflow</enumerationValue>
                    <enumerationValue key="nanoflow">Nanoflow</enumerationValue>
                </enumerationValues>
            </property>
            <property key="childReference" type="entity" required="false" allowNonPersistableEntities="true" isPath="yes" pathType="referenceSet" entityProperty="nodeEntity">
                <caption>Child reference</caption>
                <description>Set method: 'Reference'. Scenario 1: Child reference entity. Choose this and it will get the data over reference, through a normal mx.data.get call. This needs a complete tree-structure</description>
            </property>
            <property key="childBoolean" type="attribute" entityProperty="nodeEntity" required="false" isPath="optional" pathType="reference">
                <caption>Has child attr</caption>
                <description>Set method: 'Microflow/Nanoflow'. Scenario 2/3: Has child attribute. Choose this if you do not have a complete tree-structure available. This will mean you will need to get the data through the getChildren microflow/nanoflow. Make sure the 'Child reference' attribute is NOT set.</description>
                <attributeTypes>
                    <attributeType name="Boolean" />
                </attributeTypes>
            </property>
            <property key="getChildMf" type="microflow" required="false" entityProperty="nodeEntity">
                <caption>Get child Microflow</caption>
                <description>Set method: 'Microflow'. Scenario 2: Get children through a microflow. Make sure you set the 'Has child attr'. If it detects it has children, it will get the children using this microflow.</description>
                <returnType type="Object" isList="true" entityProperty="nodeEntity" />
            </property>
            <property key="getChildNf" type="nanoflow" required="false" entityProperty="nodeEntity">
                <caption>Get child Nanoflow</caption>
                <description>Set method: 'Nanoflow'. Scenario 3: Get children through a nanoflow. Make sure you set the 'Has child attr'. If it detects it has children, it will get the children using this nanoflow.
NOTE: Non-persistent entities are discouraged as they have unpredictable behavior combined with Nanoflows.
                </description>
                <returnType type="Object" isList="true" entityProperty="nodeEntity" />
            </property>
        </propertyGroup>

        <!-- ****************
                Helper
        *********************-->

        <propertyGroup caption="Helper">
            <property key="helperEntity" type="entity" required="false" allowNonPersistableEntities="true">
                <caption>Helper entity</caption>
                <description>This helper entity is necessary when doing selections/clicks. The reason for that is that when doing a onClick or Selection, you want to know both the Context (your view) as well as the Node that was clicked/selected. This can only be accomplished by introducing a Helper object.

It should be a non-persistent entity (persistent is not permitted) with a reference to your context object, and a reference SET to your node objects. The widget will create the references for you when you click on a Node or on a button when doing selections. If you use this for an onClick/Single Selection, the reference set will contain only 1 Node object</description>
            </property>
            <property key="helperContextReference" type="entity" required="false" entityProperty="helperEntity" isPath="yes" pathType="reference" allowNonPersistableEntities="true">
                <caption>Reference to context</caption>
                <description />
            </property>
            <property key="helperNodeReference" type="entity" required="false" entityProperty="helperEntity" isPath="yes" pathType="referenceSet" allowNonPersistableEntities="true">
                <caption>Reference to Node Entity</caption>
                <description />
            </property>
        </propertyGroup>

        <!-- ****************
                COLUMNS
        *********************-->

        <propertyGroup caption="Columns">
            <property key="columnMethod" type="enumeration" defaultValue="static">
                <caption>Definition</caption>
                <description>How you define the columns.
    - You will need to take care of your own sorting when getting columns dynamically.</description>
                <enumerationValues>
                    <enumerationValue key="static">List</enumerationValue>
                    <enumerationValue key="microflow">Microflow (Dynamic)</enumerationValue>
                    <!-- Disabled nanoflows, as this results in weird behavior -->
                    <!-- <enumerationValue key="nanoflow">Nanoflow (Dynamic)</enumerationValue> -->
                </enumerationValues>
            </property>
            <property key="columnList" type="object" isList="true" required="false">
                <caption>List</caption>
                <description>Define the columns in the Tree Table</description>
                <properties>
                    <!-- ****************
                            COLUMN DATA
                    *********************-->
                    <propertyGroup caption="Column Data">
                        <property key="columnHeader" type="string" required="false" defaultValue="">
                            <caption>Caption</caption>
                            <description>Title that is above the column</description>
                        </property>
                        <property key="columnAttr" type="attribute" entityProperty="../nodeEntity" required="true">
                            <caption>Attribute</caption>
                            <description>Attribute that holds the value</description>
                            <attributeTypes>
                                <attributeType name="AutoNumber" />
                                <attributeType name="Boolean" />
                                <attributeType name="DateTime" />
                                <attributeType name="Decimal" />
                                <attributeType name="Enum" />
                                <attributeType name="HashString" />
                                <attributeType name="Integer" />
                                <attributeType name="Long" />
                                <attributeType name="String" />
                            </attributeTypes>
                        </property>
                        <property key="transformNanoflow" type="nanoflow" required="false" entityProperty="../nodeEntity">
                            <caption>Transform Nanoflow</caption>
                            <description>Use this nanoflow to transform the data to a string</description>
                            <returnType type="String" />
                        </property>
                    </propertyGroup>
                    <!-- ****************
                            COLUMN STYLING
                    *********************-->
                    <propertyGroup caption="Column UI">
                        <property key="columnWidth" type="string" required="false" defaultValue="">
                            <caption>Width</caption>
                            <description>Set this to either a number (like '100' for 100px) or a string ('50%')</description>
                        </property>
                        <property key="columnClassName" type="string" required="false" defaultValue="">
                            <caption>ClassName</caption>
                            <description>Set a classname for this column. This is preferred over setting a certain width</description>
                        </property>
                    </propertyGroup>

                </properties>
            </property>
        </propertyGroup>

        <!-- ****************
                DYNAMIC COLUMNS
        *********************-->

        <propertyGroup caption="Dynamic Columns">
            <property key="columnHeaderEntity" type="entity" required="false" allowNonPersistableEntities="true">
                <caption>Column entity</caption>
                <description>Used when you set the column definition (See Column) to Microflow/Nanoflow</description>
            </property>
            <property key="columnHeaderLabelAttribute" type="attribute" entityProperty="columnHeaderEntity" required="false">
                <caption>Label</caption>
                <description>Attribute that holds the label</description>
                <attributeTypes>
                    <attributeType name="String" />
                </attributeTypes>
            </property>
            <property key="columnHeaderAttrAttribute" type="attribute" entityProperty="columnHeaderEntity" required="false">
                <caption>Attribute</caption>
                <description>Attribute that holds the attribute name</description>
                <attributeTypes>
                    <attributeType name="String" />
                </attributeTypes>
            </property>
            <property key="columnHeaderClassAttribute" type="attribute" entityProperty="columnHeaderEntity" required="false">
                <caption>Class</caption>
                <description>Attribute that holds the class name</description>
                <attributeTypes>
                    <attributeType name="String" />
                </attributeTypes>
            </property>
            <property key="columnHeaderMicroflow" type="microflow" required="false">
                <caption>Microflow</caption>
                <description>Choose 'Microflow' in 'Definition' and choose a microflow here</description>
                <returnType type="Object" isList="true" entityProperty="columnHeaderEntity" />
            </property>
            <!-- <property key="columnHeaderNanoflow" type="nanoflow" required="false">
                <caption>Nanoflow</caption>
                <description>Choose 'Nanoflow' in 'Definition' and choose a nnanoflow here</description>
                <returnType type="Object" isList="true" entityProperty="columnHeaderEntity" />
            </property> -->
        </propertyGroup>

        <!-- ****************
                BEHAVIOR
        *********************-->

        <propertyGroup caption="Events">
            <propertyGroup caption="Single click">
                <property key="onClickAction" type="enumeration" defaultValue="nothing">
                    <caption>Single click action</caption>
                    <description>Note: For pages it uses the Node object, for microflow/nanoflow the Helper object! Make sure you have configured this.</description>
                    <enumerationValues>
                        <enumerationValue key="nothing">Nothing</enumerationValue>
                        <enumerationValue key="mf">Microflow</enumerationValue>
                        <enumerationValue key="nf">Nanoflow</enumerationValue>
                        <enumerationValue key="open">Open page</enumerationValue>
                    </enumerationValues>
                </property>
                <property key="onClickMf" type="microflow" required="false" entityProperty="helperEntity">
                    <caption>Single click Microflow</caption>
                    <description></description>
                    <returnType type="Void" />
                </property>
                <property key="onClickNf" type="nanoflow" required="false" entityProperty="helperEntity">
                    <caption>Single click Nanoflow</caption>
                    <description></description>
                    <returnType type="Void" />
                </property>
                <property key="onClickForm" type="form" required="false">
                    <caption>Single click page</caption>
                    <description>The page to open when a row is clicked</description>
                </property>
                <property key="onClickOpenPageAs" type="enumeration" defaultValue="content">
                    <caption>Single click open page as</caption>
                    <description/>
                    <enumerationValues>
                        <enumerationValue key="content">Full page</enumerationValue>
                        <enumerationValue key="popup">Popup</enumerationValue>
                        <enumerationValue key="modal">Blocking popup</enumerationValue>
                    </enumerationValues>
                </property>
            </propertyGroup>
            <propertyGroup caption="Double click">
                <property key="onDblClickAction" type="enumeration" defaultValue="nothing">
                    <caption>Double click action</caption>
                    <description>Note: For pages it uses the Node object, for microflow/nanoflow the Helper object! Make sure you have configured this.</description>
                    <enumerationValues>
                        <enumerationValue key="nothing">Nothing</enumerationValue>
                        <enumerationValue key="mf">Microflow</enumerationValue>
                        <enumerationValue key="nf">Nanoflow</enumerationValue>
                        <enumerationValue key="open">Open page</enumerationValue>
                    </enumerationValues>
                </property>
                <property key="onDblClickMf" type="microflow" required="false" entityProperty="helperEntity">
                    <caption>Double click Microflow</caption>
                    <description></description>
                    <returnType type="Void" />
                </property>
                <property key="onDblClickNf" type="nanoflow" required="false" entityProperty="helperEntity">
                    <caption>Double click Nanoflow</caption>
                    <description></description>
                    <returnType type="Void" />
                </property>
                <property key="onDblClickForm" type="form" required="false">
                    <caption>Double click page</caption>
                    <description>The page to open when a row is clicked</description>
                </property>
                <property key="onDblClickOpenPageAs" type="enumeration" defaultValue="content">
                    <caption>Double click open page as</caption>
                    <description/>
                    <enumerationValues>
                        <enumerationValue key="content">Full page</enumerationValue>
                        <enumerationValue key="popup">Popup</enumerationValue>
                        <enumerationValue key="modal">Blocking popup</enumerationValue>
                    </enumerationValues>
                </property>
            </propertyGroup>
        </propertyGroup>

        <!-- ****************
                UI
        *********************-->

        <propertyGroup caption="UI">
            <property key="uiSize" type="enumeration" defaultValue="small">
                <caption>Size</caption>
                <description>Set size of table, affects paddings and some styling</description>
                <enumerationValues>
                    <enumerationValue key="default">Big</enumerationValue>
                    <enumerationValue key="middle">Middle</enumerationValue>
                    <enumerationValue key="small">Small</enumerationValue>
                </enumerationValues>
            </property>
            <property key="uiShowHeader" type="boolean" defaultValue="true">
                <caption>Show header</caption>
                <description>Make header row visible/invisible</description>
            </property>
            <property key="uiRowClassAttr" type="attribute" entityProperty="nodeEntity" required="false">
                <caption>Row Class Attribute</caption>
                <description>Attribute that will set an extra class on a row. This attribute should contain a valid css className, like 'mx-treeview-row'. This className can also be used in styling, where you would define a couple of classNames to set certain statuses and give each a color. This can be a calculated attribute, but keep in mind that performance might go down if you use that too much.</description>
                <attributeTypes>
                    <attributeType name="String" />
                </attributeTypes>
            </property>
            <property key="uiRowIconAttr" type="attribute" entityProperty="nodeEntity" required="false">
                <caption>Icon Attribute</caption>
                <description>Attribute that will determine which icon to show in the first column of the row. Can be prefixed (see next)</description>
                <attributeTypes>
                    <attributeType name="String" />
                </attributeTypes>
            </property>
            <property key="uiIconPrefix" type="string" required="false" defaultValue="glyphicon glyphicon-">
                <caption>Icon class prefix</caption>
                <description>When using icons in a row, it will use an &lt;i&gt; element with this className. When empty, it will use the standard 'glyphicon glyphicon-' prefix to use Bootstrap style elements. You can set your own icon prefixes here.</description>
            </property>
        </propertyGroup>

        <!-- ****************
                SELECTION
        *********************-->

        <propertyGroup caption="Selection">
            <propertyGroup caption="Selection behavior">
                <property key="selectMode" type="enumeration" defaultValue="none">
                    <caption>Select Mode</caption>
                    <description>Make sure you add the Selection Helper entity when doing selections!</description>
                    <enumerationValues>
                        <enumerationValue key="none">None</enumerationValue>
                        <enumerationValue key="single">Single</enumerationValue>
                        <enumerationValue key="multi">Multi</enumerationValue>
                    </enumerationValues>
                </property>
                <property key="selectClickSelect" type="boolean" defaultValue="true">
                    <caption>Click to select</caption>
                    <description>If enabled, you can select a row by simply clicking on it. If disabled, you will need to click the checkbox.</description>
                </property>
                <property key="selectHideCheckboxes" type="boolean" defaultValue="false">
                    <caption>Hide checkboxes</caption>
                    <description>Hides the left column containing the checkboxes.</description>
                </property>
                <property key="selectSelectFirstOnSingle" type="boolean" defaultValue="false">
                    <caption>Select first on single</caption>
                    <description>If enabled, it will automatically select the first row on load. Note: this might not always work when the columns change.</description>
                </property>
            </propertyGroup>

            <propertyGroup caption="Selection onChange">
                <property key="selectOnChangeAction" type="enumeration" defaultValue="nothing">
                    <caption>On Change action</caption>
                    <description>Execute this action when the selection changes</description>
                    <enumerationValues>
                        <enumerationValue key="nothing">Nothing</enumerationValue>
                        <enumerationValue key="mf">Microflow</enumerationValue>
                        <enumerationValue key="nf">Nanoflow</enumerationValue>
                    </enumerationValues>
                </property>
                <property key="selectOnChangeMicroflow" type="microflow" required="false" entityProperty="helperEntity">
                    <caption>Microflow</caption>
                    <description></description>
                    <returnType type="Void" />
                </property>
                <property key="selectOnChangeNanoflow" type="nanoflow" required="false" entityProperty="helperEntity">
                    <caption>Nanoflow</caption>
                    <description></description>
                    <returnType type="Void" />
                </property>
            </propertyGroup>

            <propertyGroup caption="Selection UI">
                <property key="selectActionButtons" type="object" isList="true" required="false">
                    <caption>Buttons</caption>
                    <description>Buttons that can be triggered when you have selected something. If no buttons are configured, Select Mode will be ignored.</description>
                    <properties>
                        <propertyGroup caption="Button UI">
                            <property key="selectABLabel" type="string" required="true" defaultValue="">
                                <caption>Caption</caption>
                                <description></description>
                            </property>
                            <property key="selectABClass" type="string" required="false" defaultValue="">
                                <caption>Class</caption>
                                <description>Extra class names</description>
                            </property>
                            <property key="selectABHideOnNotApplicable" type="boolean" defaultValue="true">
                                <caption>Hide when not applicable</caption>
                                <description>If this is set to 'true', it will hide the button when it does not have an applicable action for the selection (none/single/multi). If not, it will only disable the button.</description>
                            </property>
                        </propertyGroup>
                        <propertyGroup caption="Button events">
                            <property key="selectABAction" type="enumeration" defaultValue="mf">
                                <caption>Click action</caption>
                                <description>Note: For the microflow/nanoflow you will need to define the Helper entity!</description>
                                <enumerationValues>
                                    <enumerationValue key="mf">Microflow</enumerationValue>
                                    <enumerationValue key="nf">Nanoflow</enumerationValue>
                                </enumerationValues>
                            </property>
                            <property key="selectABMicroflow" type="microflow" required="false" entityProperty="../helperEntity">
                                <caption>Microflow</caption>
                                <description></description>
                                <returnType type="Void" />
                            </property>
                            <property key="selectABNanoflow" type="nanoflow" required="false" entityProperty="../helperEntity">
                                <caption>Nanoflow</caption>
                                <description></description>
                                <returnType type="Void" />
                            </property>
                        </propertyGroup>
                    </properties>
                </property>
            </propertyGroup>
        </propertyGroup>

    </properties>
</widget>
